<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador Lateral BoriWeb</title>
    <!-- Carga de Tailwind CSS para el estilo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; 
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        #app-container { display: flex; width: 100%; }

        /* PANEL LATERAL: Buscador */
        #sidebar { 
            width: 320px; 
            background-color: #ffffff; 
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1); 
            padding: 2rem 1rem; 
            flex-shrink: 0; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-start; 
            align-items: center; 
            overflow-y: auto; 
        }

        /* √Årea Principal: Monitos */
        #main-content { 
            flex-grow: 1; 
            background-color: #e5e7eb;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        
        @media (max-width: 768px) {
            #sidebar { width: 100%; padding: 1rem; }
            #main-content { display: none; }
        }
        
        /* Ajustes visuales para que el GCSE se vea bien */
        .gsc-control-cse { 
            width: 100%; 
            border: none !important; 
            padding: 0 !important; 
            box-shadow: none !important;
        }
        .gsc-search-button-v2 {
            border-radius: 0.75rem !important;
            height: 40px !important;
        }
        .gsc-search-box { margin-bottom: 20px; }
        .gsib_a { padding: 10px 0 !important; }
        
        /* --- CSS DE LOS MONITOS (Nuevo estilo SVG) --- */
        .monito-svg {
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Rebote para que cierren y abran con energ√≠a */
        }
        
        /* Oculta los ojos abiertos cuando est√°n cerrados */
        .eyes-closed-state .open-eye {
            opacity: 0;
        }
        /* Muestra los ojos cerrados (la l√≠nea) */
        .eyes-closed-state .closed-eye {
            opacity: 1;
        }
        /* Oculta la l√≠nea de ojo cerrado cuando est√°n abiertos */
        .closed-eye {
            opacity: 0;
            transition: opacity 0.3s;
        }
    </style>
</head>
<body>
    
    <div id="app-container">
        
        <!-- PANEL LATERAL (Buscador) -->
        <aside id="sidebar">
            <div class="flex items-center space-x-2 pb-6 border-b border-gray-100 mb-6 w-full justify-center">
                <h2 class="text-2xl font-bold text-blue-700">BoriWeb Buscador</h2>
            </div>
            
            <!-- Contenedor del Buscador de Google Personalizado (GCSE) -->
            <div id="gcse-container" class="w-full">
                <!-- El componente de b√∫squeda se inserta aqu√≠ -->
                <div class="gcse-search"></div>
            </div>

            <div class="mt-auto pt-4 border-t border-gray-100 w-full text-center">
                <p class="text-xs text-gray-500 mt-4">
                    Motor de b√∫squeda proporcionado por Google
                </p>
            </div>
        </aside>

        <!-- Contenido Principal (Monitos SVG) -->
        <main id="main-content">
            <div class="flex flex-col items-center">
                
                <!-- Contenedor de los Monitos -->
                <div id="monitos-container" class="flex space-x-4 sm:space-x-8">
                    
                    <!-- MONITO SVG √öNICO - CLONADO 3 VECES POR JS -->
                    <div id="monito-template" class="hidden">
                        <svg class="monito-svg w-32 h-32" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Cuerpo (como un garabato amarillo) -->
                            <path d="M50 10 C 80 0, 100 20, 90 50 C 95 80, 70 100, 50 90 C 30 100, 5 75, 10 45 C 0 15, 30 20, 50 10 Z" 
                                  stroke="currentColor" stroke-width="3" fill="currentColor" class="monito-body" />
                            
                            <!-- Ojos Abiertos (Dos c√≠rculos) -->
                            <g class="open-eye">
                                <circle cx="35" cy="40" r="4" fill="black" />
                                <circle cx="65" cy="40" r="4" fill="black" />
                            </g>
                            
                            <!-- Ojos Cerrados (Dos l√≠neas, inicialmente invisibles) -->
                            <g class="closed-eye" opacity="0">
                                <line x1="25" y1="40" x2="45" y2="40" stroke="black" stroke-width="4" stroke-linecap="round"/>
                                <line x1="55" y1="40" x2="75" y2="40" stroke="black" stroke-width="4" stroke-linecap="round"/>
                            </g>
                            
                            <!-- Boca Sonriente (l√≠nea) -->
                            <path d="M40 65 Q 50 75, 60 65" stroke="black" stroke-width="3" stroke-linecap="round" fill="none"/>
                        </svg>
                    </div>

                    <!-- Los monitos se insertar√°n aqu√≠ por JavaScript -->
                    <div id="monito-1" class="monito-placeholder"></div>
                    <div id="monito-2" class="monito-placeholder"></div>
                    <div id="monito-3" class="monito-placeholder"></div>
                </div>
                
                <h1 class="text-3xl font-bold mt-12 text-gray-700">
                    ¬°Monitos Vigilantes!
                </h1>
                <p id="monito-message" class="text-xl mt-4 text-blue-600">
                    Est√°n listos para ver qu√© buscas, Boris. üëÄ
                </p>
            </div>
        </main>
    </div>

    <!-- Script para cargar el Buscador de Google Personalizado (GCSE) -->
    <script async src="https://cse.google.com/cse.js?cx=513b727a03e6d43bb"></script>

    <!-- L√≥gica de los Monitos y SVG Setup -->
    <script>
        const monitoColors = ["#facc15", "#60a5fa", "#a855f7"]; // Amarillo, Azul, P√∫rpura

        // Funci√≥n para inicializar los 3 monitos a partir del template
        function initializeMonitos() {
            const template = document.getElementById('monito-template').innerHTML;
            const container1 = document.getElementById('monito-1');
            const container2 = document.getElementById('monito-2');
            const container3 = document.getElementById('monito-3');

            container1.innerHTML = template;
            container2.innerHTML = template;
            container3.innerHTML = template;
            
            // Asignar colores a las copias
            container1.querySelector('.monito-svg').style.color = monitoColors[0];
            container2.querySelector('.monito-svg').style.color = monitoColors[1];
            container3.querySelector('.monito-svg').style.color = monitoColors[2];
        }

        // Lista de palabras que hacen que los monitos cierren los ojos
        function isGrownUpContent(query) {
            const forbiddenTerms = [
                "cosas para grande",
                "adulto",
                "prohibido",
                "sexual",
                "armas",
                "cigarrillos",
                "alcohol",
                "violencia",
                // ¬°T√©rmino sensible a√±adido para que cierren los ojos!
                "porno" 
            ];
            const lowerQuery = query.toLowerCase();
            return forbiddenTerms.some(term => lowerQuery.includes(term));
        }

        // Funci√≥n para abrir/cerrar los ojos de los monitos
        function updateMonitos(shouldCloseEyes) {
            const monitoPlaceholders = document.querySelectorAll('.monito-placeholder');
            const monitoMessage = document.getElementById('monito-message');

            monitoPlaceholders.forEach(monitoContainer => {
                const monitoSvg = monitoContainer.querySelector('.monito-svg');
                if (monitoSvg) {
                    if (shouldCloseEyes) {
                        monitoSvg.classList.add('eyes-closed-state');
                    } else {
                        monitoSvg.classList.remove('eyes-closed-state');
                    }
                }
            });

            if (shouldCloseEyes) {
                monitoMessage.textContent = "¬°Uy! Eso no es para ti. Estamos cerrando los ojos. üôà";
                monitoMessage.classList.remove('text-blue-600');
                monitoMessage.classList.add('text-red-500');
            } else {
                monitoMessage.textContent = "¬°Est√°n listos para ver qu√© buscas, Boris! üëÄ";
                monitoMessage.classList.remove('text-red-500');
                monitoMessage.classList.add('text-blue-600');
            }
        }
        
        // --- Observador para el input de GCSE ---
        function attachSearchListener() {
            const searchInput = document.querySelector('input.gsc-input');
            const searchButton = document.querySelector('.gsc-search-button-v2');

            if (searchInput && searchButton) {
                console.log("Input y bot√≥n de GCSE encontrados. Iniciando monitoreo.");
                
                // Funci√≥n que verifica y actualiza la UI
                const handleSearch = () => {
                    // El valor del input se actualiza r√°pido, no necesitamos un setTimeout largo
                    const query = searchInput.value;
                    console.log("B√∫squeda detectada:", query);
                    updateMonitos(isGrownUpContent(query));
                };

                // 1. Listener para click en el bot√≥n de buscar
                searchButton.addEventListener('click', handleSearch);
                
                // 2. Listener para la tecla 'Enter' dentro del input
                searchInput.addEventListener('keydown', (e) => {
                    // Handle Enter key for search submission
                    if (e.key === 'Enter') {
                        handleSearch(); 
                    }
                });
                
                // 3. Listener para detectar cambios en el input (mientras se escribe)
                searchInput.addEventListener('input', () => {
                    // Mantener los ojos abiertos mientras se escribe, pero cerrarlos si el texto es "adulto"
                    updateMonitos(isGrownUpContent(searchInput.value));
                });


            } else {
                // Si a√∫n no se ha cargado el componente de Google, intentamos de nuevo en medio segundo.
                setTimeout(attachSearchListener, 500);
            }
        }

        // 4. Al cargar la p√°gina, inicializar los monitos y el monitoreo
        document.addEventListener('DOMContentLoaded', () => {
            initializeMonitos();
            // Damos 1 segundo para que el script externo del GCSE se cargue.
            setTimeout(attachSearchListener, 1000); 
            updateMonitos(false);
        });
        
    </script>
</body>
</html>
